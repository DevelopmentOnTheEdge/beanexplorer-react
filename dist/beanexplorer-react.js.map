{"version":3,"file":"beanexplorer-react.js","sources":["../src/components/Property.js","../src/components/Properties.js","../src/components/PropertyInput.js","../src/components/PropertySet.js"],"sourcesContent":["import React                from 'react';\nimport PropTypes            from 'prop-types';\nimport classNames           from 'classnames';\nimport Datetime             from 'react-datetime';\nimport moment               from 'moment';\nimport Select, { Creatable }from 'react-select';\nimport VirtualizedSelect    from 'react-virtualized-select'\nimport NumericInput         from 'react-numeric-input';\nimport CKEditor             from 'react-ckeditor-component';\nimport MaskedInput          from 'react-maskedinput';\n\n\nclass Property extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.onDateChange = this.onDateChange.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeMulti = this.handleChangeMulti.bind(this);\n    this.numericHandleChange = this.numericHandleChange.bind(this);\n  }\n\n  handleChange(event) {\n    //console.log(this.props.path, Property._getValueFromEvent(event));\n    this.props.onChange(this.props.path, Property._getValueFromEvent(event));\n  }\n\n  handleChangeMulti(event) {\n    let selectArray = [];\n    Object.keys(event).forEach(function (key) {\n      selectArray.push(event[key].value);\n    });\n    this.props.onChange(this.props.path, selectArray);\n  }\n\n  numericHandleChange(valueAsNumber, valueAsString, input){\n    this.props.onChange(this.props.path, valueAsNumber);\n  }\n\n  static _getValueFromEvent(event) {\n    if(!event)\n      return '';\n    if(event._d)\n    {\n      console.log(Property.formatDate(event._d));\n      return Property.formatDate(event._d);\n    }\n    if(!event.target)\n      return event.value;\n    const element = event.target;\n    return (element.type === 'checkbox') ? element.checked : element.value;\n  }\n\n  static getBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  onDateChange(date){\n    //console.log(date);\n    if(typeof date === \"string\"){\n      if(date.match('(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[012])\\.(19|20)\\d\\d')){\n        //console.log(\"str 10: \" + date);\n        this.handleChange(date);\n      }\n    }else{\n      this.handleChange(date)\n    }\n  }\n\n  //todo error date status\n  // onDateChange(date){\n  //   //console.log(date);\n  //   if(typeof date === \"string\"){\n  //     if(date.match('(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[012])\\.(19|20)\\d\\d')){\n  //       //console.log(\"str 10: \" + date);\n  //       this.handleChange(date);\n  //       this.setState({status: 'none'});\n  //     }else{\n  //       this.handleChange(date);\n  //       this.setState({status: 'error'});\n  //     }\n  //   }else{\n  //     this.handleChange(date);\n  //     this.setState({status: 'none'});\n  //   }\n  // }\n\n  static getExtraAttrsMap(extraAttrs){\n    let map = {};\n    if(extraAttrs === undefined)return map;\n    for (let i=0 ;i< extraAttrs.length; i++){\n      map[extraAttrs[i][0]] = extraAttrs[i][1];\n    }\n    return map;\n  }\n\n  render() {\n    const meta  = this.props.meta;\n    const id    = this.props.name + \"Field\";\n\n    let valueControl = Property.getControl(this.props, this.handleChange, this.handleChangeMulti, this.numericHandleChange, this.onDateChange);\n\n    const label = <label htmlFor={id} className={meta.type === \"Boolean\" ? 'form-check-label' : 'form-control-label'}>\n      {meta.displayName || id}</label>;\n\n    const messageElement = meta.message ? <span className={this.props.messageClassName || \"form-control-feedback\"}>{meta.message}</span> : undefined;\n\n    let hasStatusClasses = classNames(\n      {'has-danger' : meta.status === 'error'},\n      {'has-warning' : meta.status === 'warning'},\n      {'has-success' : meta.status === 'success'},\n    );\n    if(this.state && this.state.status === 'error'){\n      hasStatusClasses = 'has-danger';\n    }\n    const classNameForm = (meta.type === \"Boolean\")\n      ? this.props.classNameFormCheck || 'form-check property'\n      : this.props.classNameFormGroup || 'form-group property';\n\n    const cssClasses = meta.cssClasses || 'col-lg-12';\n\n    const outerClasses = classNames(\n      cssClasses,\n      {'display-none' : meta.hidden}\n    );\n\n    const classes = classNames(\n      classNameForm,\n      hasStatusClasses,\n      {'required' : !meta.canBeNull}\n    );\n\n    if(meta.type === \"Boolean\")\n    {\n      return (\n        <div className={outerClasses}>\n          <div className={classes}>\n            {valueControl}\n            {label}\n            {messageElement}\n          </div>\n        </div>\n      );\n    }else if(meta.labelField){\n      return (\n        <div className={classNames('form-group property property-label', meta.cssClasses || 'col-lg-12', hasStatusClasses)}>{valueControl}</div>\n      );\n    }else{\n      return (\n        <div className={outerClasses}>\n          <div className={classes}>\n            {label}\n            <div className=\"controls\">\n              {valueControl}\n              {messageElement}\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  static getControl(props, handleChange, handleChangeMulti, numericHandleChange, onDateChange){\n    const meta  = props.meta;\n    const value = props.value;\n    const id    = props.name + \"Field\";\n    const handle = meta.multipleSelectionList ? handleChangeMulti : handleChange;\n    const extraAttrsMap = Property.getExtraAttrsMap(meta.extraAttrs);\n\n    const controls = {\n      Boolean: () => (\n        <input type=\"checkbox\" id={id} key={id} checked={value === true || value === \"true\"} onChange={handle}\n               className={props.controlClassName || 'form-check-input'} disabled={meta.readOnly} />\n      ),\n      select: () => {\n        const options = Property.optionsToArray(meta.tagList);\n        // VirtualizedSelect css подправить (на длинных строках с переносами)\n        let strValue;\n        if(Array.isArray(value)){\n          strValue = [];\n          for (let i = 0; i < value.length; i++)strValue.push(\"\" + value[i]);\n        }\n        else\n        {\n          strValue = \"\" + value;\n        }\n        const selectProps = {\n          ref: id, name: id, value: strValue, options: options, onChange: handle,\n          clearAllText: props.localization.clearAllText,\n          clearValueText: props.localization.clearValueText,\n          noResultsText: props.localization.noResultsText,\n          searchPromptText: props.localization.searchPromptText,\n          loadingPlaceholder: props.localization.loadingPlaceholder,\n          placeholder: meta.placeholder || props.localization.placeholder,\n          backspaceRemoves: false,\n          disabled: meta.readOnly,\n          multi: meta.multipleSelectionList,\n          matchPos: extraAttrsMap.matchPos || \"any\"\n        };\n\n        if(extraAttrsMap.inputType === \"Creatable\"){\n          return <Creatable {...selectProps} />\n        }\n\n        if(extraAttrsMap.inputType === \"VirtualizedSelect\"){\n          return <VirtualizedSelect {...selectProps} clearable searchable labelKey=\"label\" valueKey=\"value\" />\n        }\n        return <Select {...selectProps} />\n      },\n      Date: () => {\n        return <Datetime dateFormat=\"DD.MM.YYYY\" value={moment(value === undefined ? \"\" : value)}\n                         onChange={(v) => onDateChange(v)} id={id} key={id}\n                         timeFormat={false} closeOnSelect={true} closeOnTab={true} locale={props.localization.locale || \"en\"}\n                         inputProps={ {disabled: meta.readOnly} } />\n      },\n//      dateTime: {\n//        normal: () => {\n//          return ( React.createElement(Datetime, {id: id, key: id, value: value, parent: _this, onChange: handleChange, time: true, className: props.controlClassName}) );\n//        },\n//        readOnly: () => this.createStatic(value)\n//      },\n\n\n      textArea: () => {\n        return <textarea placeholder={meta.placeholder} id={id}  rows={meta.rows || 3} cols={meta.columns} value={value === undefined ? \"\" : value}\n                         onChange={handle} className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      maskTest: () => {\n        return <MaskedInput mask={Property.getMaskInput(meta.validationRules)} onChange={handle} className={props.controlClassName || \"form-control\"} />\n      },\n      textInput: () => {\n        return <input type=\"text\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                      onChange={handle} className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      numberInput: () => {\n        const numericProps = Property.getNumericProps(meta);\n        return <NumericInput {...numericProps} placeholder={meta.placeholder} id={id} key={id} value={value}\n                             onChange={numericHandleChange} style={ false }\n                             className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      passwordField: () => {\n        return <input type=\"password\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                      onChange={handle} className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      file: () => {\n        return <input type=\"file\" placeholder={meta.placeholder} id={id} key={id}\n                      className={props.controlClassName || \"form-control\"} disabled={meta.readOnly}\n                      multiple={meta.multipleSelectionList}\n                      onChange={(e) => {\n                        if(e.target.files && e.target.files.length === 1) {\n                          const fileName = e.target.files[0].name;\n                          Property.getBase64(e.target.files[0]).then(data => {\n                            handle({value: {type: \"Base64File\", name: fileName, data: data}})\n                          });\n                        }\n                      }\n                      } />\n      },\n\n      WYSIWYG: () => {\n        return <CKEditor activeClass=\"p10\" content={value}\n                         events={{\n                           \"change\": (evt) => { handle({value: evt.editor.getData()}) }\n                         }}\n                         config={{language: 'ru',}}\n        />\n      },\n      labelField: () => {\n        if(meta.rawValue)\n        {\n          return (<div dangerouslySetInnerHTML={{__html: value}} />)\n        }\n        else\n        {\n          return (<label className=\"form-control-label\">{value}</label>)\n        }\n      },\n    };\n\n    if(meta.tagList)\n    {\n      return controls['select']();\n    }\n\n    if(meta.passwordField)\n    {\n      return  controls['passwordField']();\n    }\n\n    if(meta.labelField)\n    {\n      return  controls['labelField']();\n    }\n\n    if(meta.validationRules !== undefined && Property.isNumberInput(meta.validationRules))\n    {\n      return controls['numberInput']()\n    }\n\n    if(controls[meta.type] !== undefined)\n    {\n      return controls[meta.type]();\n    }\n\n    if(extraAttrsMap.inputType === 'WYSIWYG')\n    {\n      return controls['WYSIWYG']();\n    }\n\n    if(extraAttrsMap.inputType === 'textArea')\n    {\n      return controls['textArea']();\n    }\n\n    if(extraAttrsMap.inputType === 'file')\n    {\n      return controls['file']();\n    }\n\n    if(meta.validationRules !== undefined && Property.getMaskInput(meta.validationRules))\n    {\n      return controls['maskTest']();\n    }\n\n    return controls['textInput']();\n  }\n\n  static getNumericProps(meta)\n  {\n    let props = {};\n    props['maxLength'] = 14;//errors if more\n    const rules = meta.validationRules;\n    for (let i =0 ; i< rules.length; i++)\n    {\n      if(rules[i].type === \"baseRule\" && (rules[i].attr === \"number\"))\n      {\n        props['precision'] = 10;\n      }\n      if(rules[i].type === \"baseRule\" && (rules[i].attr === \"integer\"))\n      {\n        props['min'] = -2147483648;\n        props['max'] = 2147483647;\n        props['maxLength'] = 10;\n      }\n      // if(rules[i].type === \"digits\")\n      // {\n      //   props['min'] = 0;//todo not work\n      // }\n    }\n    if(meta.columnSize){\n      props['maxLength'] = parseInt(meta.columnSize);\n    }\n    return props;\n  }\n\n  static getMaskInput(rules)\n  {\n    for (let i = 0; i < rules.length; i++)\n    {\n      if (\"mask\" in rules[i]) {\n        return rules[i].mask\n      }\n    }\n    return null;\n  }\n\n  static isNumberInput(rules)\n  {\n    for (let i =0 ; i< rules.length; i++)\n    {\n      if(rules[i].type === \"baseRule\" &&\n        ( rules[i].attr === \"digits\" || rules[i].attr === \"integer\" || rules[i].attr === \"number\" ))return true;\n    }\n    return false;\n  }\n\n  static optionsToArray(options){\n    let optionObject = [];\n    for(let i =0 ;i < options.length; i++){\n      optionObject.push({ value: options[i][0], label: options[i][1] });\n    }\n    return optionObject;\n  }\n\n//  createStatic(value) {\n//    return <p className=\"form-control-static\" dangerouslySetInnerHTML={{__html: value}} />;\n//  }\n\n  //ISO 8601 format\n  static formatDate(date){\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    return year + '-' + Property.format2digit(month) + '-' + Property.format2digit(day);\n  }\n\n  static format2digit(number){\n    return (\"0\" + number).slice(-2);\n  }\n}\n\nProperty.defaultProps = {\n  localization: {\n    locale: 'en',\n    clearAllText: 'Clear all',\n    clearValueText: 'Clear value',\n    noResultsText: 'No results found',\n    searchPromptText: 'Type to search',\n    placeholder: 'Select ...',\n    loadingPlaceholder: 'Loading...'\n  },\n};\n\nProperty.propTypes = {\n  localization: PropTypes.object\n};\n\nexport default Property;\n","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport Property             from './Property';\nimport JsonPointer          from 'json-pointer';\n\nclass Properties extends React.Component {\n\n  static get(path, bean, localization){\n    const itemName = path.substring(path.lastIndexOf(\"/\")+1);\n    const itemMeta = bean.meta[path];\n    const itemValue = JsonPointer.get(bean, \"/values\" + path);\n    return {\n      meta: itemMeta,\n      name: itemName,\n      value: itemValue,\n      path: path,\n      key: itemName + \"Property\",\n      ref: itemName + \"Property\",\n      localization: localization\n    }\n  }\n\n  render() {\n    let fields = this.props.bean.order.map((path, i)=> {\n      if(this.props.ids === undefined || this.props.ids.includes(i)){\n        return(\n         <Property {...Properties.get(path, this.props.bean, this.props.localization)} onChange={this.props.onChange} />\n        )\n      }else{\n        return null;\n      }\n    });\n\n    return <div className={this.props.className}>{fields}</div>;\n  }\n\n}\n\nProperties.defaultProps = {\n  className: \"row\",\n  localization: {},\n};\n\nProperties.propTypes = {\n  className: PropTypes.string.isRequired,\n  bean: PropTypes.object.isRequired,\n  ids: PropTypes.array,\n  onChange: PropTypes.func,\n  localization: PropTypes.object\n};\n\nexport default Properties;\n","import React                from 'react';\nimport PropTypes            from 'prop-types';\nimport classNames           from 'classnames';\nimport Datetime             from 'react-datetime';\nimport moment               from 'moment';\nimport Select               from 'react-select';\nimport VirtualizedSelect    from 'react-virtualized-select'\nimport JsonPointer          from 'json-pointer';\n\n\nclass PropertyInput extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeMulti = this.handleChangeMulti.bind(this);\n    this.onDateChange = this.onDateChange.bind(this);\n  }\n\n  static get(path, bean, localization){\n    const itemName = path.substring(path.lastIndexOf(\"/\")+1);\n    const itemMeta = bean.meta[path];\n    const itemValue = JsonPointer.get(bean, \"/values\" + path);\n    return {\n      meta: itemMeta,\n      name: itemName,\n      value: itemValue,\n      path: path,\n      key: itemName + \"Property\",\n      ref: itemName + \"Property\",\n      localization: localization\n    }\n  }\n\n  handleChange(event) {\n    let path;\n    if(this.props.path){\n      path = this.props.path;\n    }else{\n      path = this.props.bean.order[this.props.id];\n    }\n    this.props.onChange(path, this._getValueFromEvent(event));\n  }\n\n  onDateChange(date){\n      //console.log(date);\n      if(typeof date === \"string\"){\n          if(date.match('(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[012])\\.(19|20)\\d\\d')){\n              //console.log(\"str 10: \" + date);\n              this.handleChange(date);\n          }\n      }else{\n          this.handleChange(date)\n      }\n  }\n\n  handleChangeMulti(event) {\n    let selectArray = [];\n    Object.keys(event).forEach(function (key) {\n      selectArray.push(event[key].value);\n    });\n    this.props.onChange(this.props.path, selectArray);\n  }\n\n  _getValueFromEvent(event) {\n    if(!event)\n      return '';\n    if(event._d)\n    {\n      return this.formatDate(event._d);\n    }\n    if(!event.target)\n      return event.value;\n    const element = event.target;\n    return (element.type === 'checkbox') ? element.checked : element.value;\n  }\n\n  render() {\n    let attr;\n    if(this.props.path){\n      attr = PropertyInput.get(this.props.path, this.props.bean, this.props.localization)\n    }else{\n      attr = PropertyInput.get(this.props.bean.order[this.props.id], this.props.bean, this.props.localization)\n    }\n    const meta  = attr.meta;\n    const value = attr.value || attr.meta.defaultValue;\n    const id    = attr.name + \"Field\";\n    const handle = meta.multipleSelectionList ? this.handleChangeMulti : this.handleChange;\n\n    const controls = {\n      Boolean: () => (\n        <input type=\"checkbox\" id={id} key={id} value={value} checked={value === undefined ? \"\" : value} onChange={handle}\n                 className={attr.controlClassName || 'form-check-input'} disabled={meta.readOnly} />\n      ),\n      select: () => {\n        const options = this.optionsToArray(meta.tagList);\n        //if(options.length > 100){\n        let strValue;\n        if(Array.isArray(value)){\n          strValue = [];\n          for (let i = 0; i < value.length; i++)strValue.push(\"\" + value[i]);\n        }\n        else\n        {\n          strValue = \"\" + value;\n        }\n          return <VirtualizedSelect ref={id} name={id} value={strValue} options={options}\n                          disabled={meta.readOnly} onChange={handle}\n                          multi={meta.multipleSelectionList} matchPos=\"any\"\n                          clearable\n                          searchable\n                          labelKey=\"label\"\n                          valueKey=\"value\"\n                          clearAllText={attr.localization.clearAllText}\n                          clearValueText={attr.localization.clearValueText}\n                          noResultsText={attr.localization.noResultsText}\n                          searchPromptText={attr.localization.searchPromptText}\n                          placeholder={attr.localization.placeholder}\n                          loadingPlaceholder={attr.localization.loadingPlaceholder}\n          />\n//        }else{\n//          return <Select ref={id} name={id} value={value} options={options}\n//                          disabled={meta.readOnly} onChange={handle} placeholder={meta.placeholder}\n//                          multi={meta.multipleSelectionList} matchPos=\"start\"\n//                          clearAllText={attr.localization.clearAllText}\n//                          clearValueText={attr.localization.clearValueText}\n//                          noResultsText={attr.localization.noResultsText}\n//                          searchPromptText={attr.localization.searchPromptText}\n//                          placeholder={attr.localization.placeholder}\n//                          loadingPlaceholder={attr.localization.loadingPlaceholder}\n//          />\n//        }\n      },\n      Date: () => {\n          return <Datetime dateFormat=\"DD.MM.YYYY\" value={moment(value === undefined ? \"\" : value)}\n                           onChange={(v) => onDateChange(v)} id={id} key={id}\n                           timeFormat={false} closeOnSelect={true} closeOnTab={true} locale={props.localization.locale || \"en\"}\n                           inputProps={ {disabled: meta.readOnly} } />\n      },\n//      dateTime: {\n//        normal: () => {\n//          return ( React.createElement(Datetime, {id: id, key: id, value: value, parent: _this, onChange: handleChange, time: true, className: attr.controlClassName}) );\n//        },\n//        readOnly: () => this.createStatic(value)\n//      },\n      textArea: () => {\n          return <textarea placeholder={meta.placeholder} id={id}  rows={meta.rows || 3} cols={meta.columns} value={value === undefined ? \"\" : value}\n                    onChange={handle} className={attr.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      textInput: () => {\n          return <input type=\"text\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                    onChange={handle} className={attr.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      passwordField: () => {\n          return <input type=\"password\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                       onChange={handle} className={attr.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      labelField: () => {\n          if(meta.rawValue){\n            return (<div dangerouslySetInnerHTML={{__html: value}} ></div>)\n          }else{\n            return (<div>{value}</div>)\n          }\n      },\n    };\n\n    //let valueControl;\n    if(meta.tagList)\n    {\n      return controls['select']();\n    }\n    else if(meta.passwordField)\n    {\n      return controls['passwordField']();\n    }\n    else if(meta.labelField)\n    {\n      return controls['labelField']();\n    }\n    else\n    {\n      return (controls[meta.type] || controls['textInput'])();\n    }\n    //return ({valueControl})\n//    return (\n//      <ValueControl {...Properties.get(attr.bean, path, attr.localization)}\n//                    onChange={attr.onChange} />\n//    );\n\n  }\n\n  optionsToArray(options){\n    let optionObject = [];\n    for(let i =0 ;i < options.length; i++){\n      optionObject.push({ value: options[i][0], label: options[i][1] });\n    }\n    return optionObject;\n  }\n\n//  createStatic(value) {\n//    return <p className=\"form-control-static\" dangerouslySetInnerHTML={{__html: value}} />;\n//  }\n\n  //ISO 8601 format\n  formatDate(date) {\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    return year + '-' + this.format2digit(month) + '-' + this.format2digit(day);\n  }\n\n  format2digit(number){\n    return (\"0\" + number).slice(-2);\n  }\n}\n\nPropertyInput.defaultProps = {\n  localization: {\n    locale: 'en',\n    clearAllText: 'Clear all',\n    clearValueText: 'Clear value',\n    noResultsText: 'No results found',\n    searchPromptText: 'Type to search',\n    placeholder: 'Select ...',\n    loadingPlaceholder: 'Loading...'\n  },\n};\n\nPropertyInput.propTypes = {\n  bean: PropTypes.object.isRequired,\n  path: PropTypes.string,\n  id: PropTypes.number,\n  onChange: PropTypes.func,\n  localization: PropTypes.object,\n};\n\nexport default PropertyInput;\n","import React       from 'react';\nimport PropTypes   from 'prop-types';\nimport Property    from './Property';\nimport JsonPointer from 'json-pointer';\n\n\nclass PropertySet extends React.Component {\n\n  _createGroup(curGroup, curGroupId, curGroupName) {\n    return (\n      <div className='property-group col-12' key={curGroupId} ref={curGroupId}>\n        <div className='property-groop-box'>\n          <h4 className='property-group__title'>{curGroupName}</h4>\n          <div className=\"row\">\n            {curGroup}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  get(path){\n    const itemName = path.substring(path.lastIndexOf(\"/\")+1);\n    const itemMeta = this.props.bean.meta[path];\n    const itemValue = JsonPointer.get(this.props.bean, \"/values\" + path);\n    return {\n      meta: itemMeta,\n      name: itemName,\n      value: itemValue,\n      path: path,\n      key: itemName + \"Property\",\n      ref: itemName + \"Property\",\n      localization: this.props.localization\n    }\n  }\n\n  render() {\n    let curGroup = [];\n    let curGroupName = null, curGroupId = null;\n    let fields = [];\n\n    const finishGroup = () => {\n      if(curGroup.length > 0) {\n        if(curGroupId) {\n          fields.push(this._createGroup(curGroup, curGroupId, curGroupName));\n        } else {\n          Array.prototype.push.apply(fields, curGroup);\n        }\n      }\n      curGroup = [];\n    };\n\n    for(const path of this.props.bean.order) {\n      const itemProps = this.get(path);\n\n      const newGroupId = itemProps.meta.groupId || null;\n      const newGroupName = itemProps.meta.groupName || null;\n      if(newGroupId !== curGroupId) {\n        finishGroup();\n        curGroupName = newGroupName;\n        curGroupId = newGroupId;\n      }\n      const field = (<Property {...itemProps} onChange={this.props.onChange} />);\n      curGroup.push(field);\n    }\n    finishGroup();\n\n    return (\n      <div className=\"property-set row\">\n        {fields}\n      </div>\n    );\n  }\n\n}\n\nPropertySet.defaultProps = {\n  localization: {},\n};\n\nPropertySet.propTypes = {\n  bean: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  localization: PropTypes.object\n};\n\nexport default PropertySet;\n"],"names":["Property","props","onDateChange","bind","handleChange","handleChangeMulti","numericHandleChange","event","onChange","path","_getValueFromEvent","selectArray","keys","forEach","key","push","value","valueAsNumber","valueAsString","input","date","match","meta","id","name","valueControl","getControl","label","type","displayName","messageElement","message","messageClassName","undefined","hasStatusClasses","classNames","status","state","classNameForm","classNameFormCheck","classNameFormGroup","cssClasses","outerClasses","hidden","classes","canBeNull","labelField","_d","log","formatDate","target","element","checked","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","extraAttrs","map","i","length","handle","multipleSelectionList","extraAttrsMap","getExtraAttrsMap","controls","controlClassName","readOnly","options","optionsToArray","tagList","strValue","Array","isArray","selectProps","localization","clearAllText","clearValueText","noResultsText","searchPromptText","loadingPlaceholder","placeholder","matchPos","inputType","moment","v","locale","disabled","rows","columns","getMaskInput","validationRules","numericProps","getNumericProps","e","files","fileName","getBase64","then","data","evt","editor","getData","language","rawValue","__html","passwordField","isNumberInput","rules","attr","columnSize","parseInt","mask","optionObject","day","getDate","month","getMonth","year","getFullYear","format2digit","number","slice","React","Component","defaultProps","propTypes","PropTypes","object","Properties","fields","bean","order","ids","includes","get","className","itemName","substring","lastIndexOf","itemMeta","itemValue","JsonPointer","string","isRequired","array","func","PropertyInput","defaultValue","PropertySet","curGroup","curGroupId","curGroupName","finishGroup","_createGroup","prototype","apply","itemProps","newGroupId","groupId","newGroupName","groupName","field"],"mappings":"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"}